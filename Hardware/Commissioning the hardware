#Commissioning Soft-Power hardware

To commission Soft Power and trim the potentiometers you best need an power supply with adjustable voltage and current.
You also need for the first tries something to limit the current from the battery to avoid a disaster if you make a mistake. A 5W car bulb in series with the battery will do.

For the first group of settings we will not plug the ESP.
If you have the high-power option, **please disconnect the + output of the high-power buck converter** and leave the other wires connected.

## Preset the buck converters
We will now trim the buck converter to their default voltage
Give approximately 18 V with a low current limit of ~ 100mA as a panel voltage. ( you may use a small panel, in half shade for that, just be sure that you will have a steady condition and not too much powerful the beginning.  

1. Trim the potentiometer of U1 to get at the battery output the float voltage of your battery (for lead-acid FLA that would have been 13.8V).
2. Be sure that **U2 delivers 5V**, if you haven't configured the presets of a HW613, set to 5V accordingly.
3. Trim the potentiometer of U3 to get at the Aux output a voltage corresponding to the float of your smaller battery, else to 75% of the desired voltage range, which should be at least 2V below the minimum of the main battery.  
4. Set the voltage of the high-power buck converter to the same voltage as U1. (be sure that the SZBK07 high-power buck converter is enabled, the red light must be on)

## Set the injection.
You can now plug the ESP 8266, for which you have uploaded the software accordingly configured to your WiFi and Thinger credentials. (cf Commissioning the software.md)

Provide limited power to the panel input as mentioned above.

If you have no high-power buck option, the ESP will not start, since it's buck converter is not enabled. You need to apply a -current limited- battery voltage to boot the ESP.
Else the high power buck option, will power the ESP until it has finished to boot and passed on to the low-power buck converter.
Once the ESP has booted (the blue light got on for a second and then lit off), the OLED information appears,  Thinger shows the ESP as being connected, the dashboard is available and responsive.  
Then you can remove the battery voltage, the ESP should continue being powered from its low-power buck converter.

You should notice the Vbat voltage, which should get close to 13.8V. If it is below 13.6V or above 13.9V you should correct the voltage with the blue slider at the dashboard and note its PWM value.  
You will correct later this value in the aO_Parameters of the configuration (#define INJ_NEUTRAL 400).

Move the slider to the right maximum and adjust the trim pot RP1 to the equalization voltage (15.2V for lead acid battery ), take notice of the voltage. If you have a fixed resistor, just take notice of the voltage in the aO_Parameters of the configuration (#define INJ_LP_MAX  15200).

Move the slider to the left minimum and take notice of the voltage (which should be between 10.5V and 11.5V in the aO_Parameters of the configuration (#define INJ_LP_MIN  11040).

Move the slider again to the neutral position, where Vbat shows the float voltage of your battery and switch to high-power. If necessary, correct the CV potentiometer of the high-power buck converter to get 13.8V again.

Move the slider to the left minimum and adjust the trim pot Rp2 to approximately the same voltage than the low power buck, take notice of the voltage in the aO_Parameters of the configuration (#define INJ_HP_MIN  11070).

Move the slider to the right maximum and take notice of the voltage in in the aO_Parameters of the configuration (#define INJ_HP_MAX  15280).

You can then recompile the programm to take the new adjustments in account and enjoy your Soft-Power-MPPT. device.


with that slider position


